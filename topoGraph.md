### io_select_udp_tun 拓扑图

服务端：10.0.80.54  
TUN：10.2.0.1

客户端：10.0.80.56   
TUN：10.2.0.2

```
            10.0.80.54:8888                             |                                    10.0.80.56:8888
                 server                                 |                                        client
                                                        |
        +-----------------------+                       |                             +---------------------------+
        |                       |                       |                             |   iperf3  -c 10.2.0.1 \   |
        |iperf3 -s -p 8888 -i 2 |                       |                             |    -p 8888  -i 2 -t 30    |
        |                       |                       |                             |                           |
        +-----------------------+                       |                             +---------------------------+
                   ↑                                    |                                           |
                   |                                    |                                           |
                   |                                    |                                           |
                   |                                    |                                           ↓
           +---------------+ src:10.2.0.2               |                   src:10.2.0.2    +---------------+ 
           | tun[10.2.0.1] |                            |                                   | tun[10.2.0.2] | 
           +---------------+ dst:10.2.0.1               |                   dst:10.2.0.1    +---------------+ 
                   ↑                                    |                                           |
                   |                                    |                                           |
                   |                                    |                                           |
                   |                                    |                                           ↓
   +--------------------------------+                   |                          +---------------------------------+
   |  ./bench_io_select_udp_tun \   |                   |                          |  ./bench_io_select_udp_tun \    |
   |    --tun-address 10.2.0.1  \   |                   |                          |    --tun-address 10.2.0.2  \    |
   |    --address 10.0.80.56        |                   |                          |    --address 10.0.80.54         |
   +--------------------------------+                   |                          +---------------------------------+
                   ↑                                    |                                           |
                   |                                +------------+                                  |
                   |                 src:10.0.80.56 |src:10.2.0.2|                                  |
                   |                 dst:10.0.80.54 |dst:10.2.0.1|                                  ↓
            +--------------+                        +------------+                            +--------------+
            | [10.0.80.54] |<---------------------------+-------------------------------------| [10.0.80.56] |
            +--------------+                            |                                     +--------------+


```

抓包数据

服务端：10.0.80.56 

tun:10.2.0.2

客户端：10.0.80.163 

tun:10.2.0.1

```
ip header
0000   45 00 00 44 9d 58 40 00 40 11 e8 75 0a 00 50 a3
0010   0a 00 50 38

0a 00 50 a3 = src:10.0.80.163
0a 00 50 38 = dst:10.0.80.56

udp header
0000   26 94 26 94 00 30 b5 1c
26 94 = sport:9876
26 94 = dport:9876

data
0000   45 00 00 28 19 77 40 00 40 06 0d 53 0a 02 00 01
0010   0a 02 00 02 22 b8 75 72 a8 3e 80 91 50 5f 8d 19
0020   50 10 00 38 fd 22 00 00

0a 02 00 01 = src:10.2.0.1
0a 02 00 02 = dst:10.2.0.2
```
可以看到，data中的头部再次嵌套了ip header

外部ip头的信息为
```
src=10.0.80.163, dest=10.0.80.56 
```
data内部的ip头信息为
```
src=10.2.0.1, dest=10.2.0.2
```
