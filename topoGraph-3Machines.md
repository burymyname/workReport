### io_select_udp_tun 三台机器实验 拓扑图

client: 10.0.80.54 <br>
tun: 10.2.0.2

VPN server: 10.0.80.163 <br>
tun: 10.2.0.1

server: 10.0.80.56

```
+----------------------------------------------------------------------------------------------------------------------+
|      10.0.80.56                                       10.0.80.163                                     10.0.80.54     |
|        server                                          VPN server                                       client       |
+----------------------------------------------------------------------------------------------------------------------+
               
  +-------------------+                                     SNAT                               +--------------------+
  |                   |                              iptables -t nat  \                        |                    |
  |     iperf3 -s     |                                -A POSTROUTING \                        |iperf3 -c 10.0.80.56|
  |                   |                                -s 10.2.0.2    \                        |                    |
  +-------------------+                                -o [enp2s0]    \                        +--------------------+
            ↑                                          -j MASQUERADE                                      |
            |                                                 |                                           |
            |                                   +-------------+                                           ↓
            |                                   ↓      +-------------+                             +-------------+ 
            |                             +------------|tun[10.2.0.1]|                             |tun[10.2.0.2]|
            |                             |            +-------------+                             +-------------+
            |                             |                   ↑src:10.2.0.2                               |src:10.2.0.2
            |                             |                   |                                           |
            |                             |                   |dst:10.0.80.56                             ↓dst:10.0.80.56
            |                             |   +------------------------------+            +-----------------------------+
            |                             |   |  ./bench_io_select_udp_tun \ |            | ./bench_io_select_udp_tun \ |
            |                             |   |   --tun-address 10.2.0.1   \ |            |   --tun-address 10.2.0.2  \ |
            |                             |   |   --address 10.0.80.54       |            |   --address 10.0.80.163     |
            |                             |   +------------------------------+            +------ ----------------------+
            |                             |                   ↑                                           |
            |                             +-------------+     |                                           |
            |                                           ↓     |                                           ↓
    +----------------+                               +-----------------+                          +----------------+
    |  [10.0.80.56]  |<------------------------------|  [10.0.80.163]  |<-------------------------|  [10.0.80.54]  |
    +----------------+       src:10.0.80.163         +-----------------+                          +----------------+
                             dst:10.0.80.56                                            +--------------+
                                                                        src:10.0.80.54 |src:10.2.0.2  |
                                                                        dst:10.0.80.163|dst:10.0.80.56|
                                                                                       +--------------+






```
